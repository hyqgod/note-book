<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于全局锁实现悲观锁并发控制 | Mrcode 笔记本</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="用来记录工作和学习过程中的笔记，汇总成册方便查阅，类容涵盖各类技术，如：Java、Git、ElasticSearch、MyCat、设计模式、Gradle、Vue - mrcode.cn">
    <link rel="preload" href="/note-book/assets/css/0.styles.ffaec31e.css" as="style"><link rel="preload" href="/note-book/assets/js/app.03b08693.js" as="script"><link rel="preload" href="/note-book/assets/js/6.203d1198.js" as="script"><link rel="preload" href="/note-book/assets/js/411.a367bedd.js" as="script"><link rel="preload" href="/note-book/assets/js/48.8dd2abf7.js" as="script"><link rel="prefetch" href="/note-book/assets/js/10.a5b54a6d.js"><link rel="prefetch" href="/note-book/assets/js/100.56e99116.js"><link rel="prefetch" href="/note-book/assets/js/101.98158e16.js"><link rel="prefetch" href="/note-book/assets/js/102.5a169803.js"><link rel="prefetch" href="/note-book/assets/js/103.b7d02fca.js"><link rel="prefetch" href="/note-book/assets/js/104.b3fec94f.js"><link rel="prefetch" href="/note-book/assets/js/105.051f5dc6.js"><link rel="prefetch" href="/note-book/assets/js/106.1171fa1a.js"><link rel="prefetch" href="/note-book/assets/js/107.4e252d64.js"><link rel="prefetch" href="/note-book/assets/js/108.ca2fea16.js"><link rel="prefetch" href="/note-book/assets/js/109.4c7508d4.js"><link rel="prefetch" href="/note-book/assets/js/11.3c27fb90.js"><link rel="prefetch" href="/note-book/assets/js/110.c104c2ad.js"><link rel="prefetch" href="/note-book/assets/js/111.68ca389e.js"><link rel="prefetch" href="/note-book/assets/js/112.3dbe2cf6.js"><link rel="prefetch" href="/note-book/assets/js/113.9a04f291.js"><link rel="prefetch" href="/note-book/assets/js/114.47f3a090.js"><link rel="prefetch" href="/note-book/assets/js/115.fcb6af93.js"><link rel="prefetch" href="/note-book/assets/js/116.4da552f1.js"><link rel="prefetch" href="/note-book/assets/js/117.ffdf0d4f.js"><link rel="prefetch" href="/note-book/assets/js/118.a5655829.js"><link rel="prefetch" href="/note-book/assets/js/119.fb631a3c.js"><link rel="prefetch" href="/note-book/assets/js/12.46fbb350.js"><link rel="prefetch" href="/note-book/assets/js/120.4e5d1280.js"><link rel="prefetch" href="/note-book/assets/js/121.103acba9.js"><link rel="prefetch" href="/note-book/assets/js/122.c6775196.js"><link rel="prefetch" href="/note-book/assets/js/123.9d7f049f.js"><link rel="prefetch" href="/note-book/assets/js/124.4f87dfa6.js"><link rel="prefetch" href="/note-book/assets/js/125.da5352bb.js"><link rel="prefetch" href="/note-book/assets/js/126.8570ff20.js"><link rel="prefetch" href="/note-book/assets/js/127.000b6dcf.js"><link rel="prefetch" href="/note-book/assets/js/128.c09ee53d.js"><link rel="prefetch" href="/note-book/assets/js/129.26e2b551.js"><link rel="prefetch" href="/note-book/assets/js/13.90935de7.js"><link rel="prefetch" href="/note-book/assets/js/130.d2729738.js"><link rel="prefetch" href="/note-book/assets/js/131.b22dce88.js"><link rel="prefetch" href="/note-book/assets/js/132.c8edc77f.js"><link rel="prefetch" href="/note-book/assets/js/133.1a7fec42.js"><link rel="prefetch" href="/note-book/assets/js/134.0ce5ffa9.js"><link rel="prefetch" href="/note-book/assets/js/135.41c20539.js"><link rel="prefetch" href="/note-book/assets/js/136.a6559720.js"><link rel="prefetch" href="/note-book/assets/js/137.d6d8215d.js"><link rel="prefetch" href="/note-book/assets/js/138.21ff07b2.js"><link rel="prefetch" href="/note-book/assets/js/139.c2e34fa3.js"><link rel="prefetch" href="/note-book/assets/js/14.24d3e22f.js"><link rel="prefetch" href="/note-book/assets/js/140.e3543449.js"><link rel="prefetch" href="/note-book/assets/js/141.c20bd627.js"><link rel="prefetch" href="/note-book/assets/js/142.dae102b9.js"><link rel="prefetch" href="/note-book/assets/js/143.39a49dff.js"><link rel="prefetch" href="/note-book/assets/js/144.5270d217.js"><link rel="prefetch" href="/note-book/assets/js/145.5e841564.js"><link rel="prefetch" href="/note-book/assets/js/146.114b0a6f.js"><link rel="prefetch" href="/note-book/assets/js/147.c3d5b342.js"><link rel="prefetch" href="/note-book/assets/js/148.891502d4.js"><link rel="prefetch" href="/note-book/assets/js/149.2edab248.js"><link rel="prefetch" href="/note-book/assets/js/15.d92a2aa1.js"><link rel="prefetch" href="/note-book/assets/js/150.4c30b7f5.js"><link rel="prefetch" href="/note-book/assets/js/151.3532f88b.js"><link rel="prefetch" href="/note-book/assets/js/152.b930b1fc.js"><link rel="prefetch" href="/note-book/assets/js/153.cbd4fadd.js"><link rel="prefetch" href="/note-book/assets/js/154.79f512ab.js"><link rel="prefetch" href="/note-book/assets/js/155.10de5703.js"><link rel="prefetch" href="/note-book/assets/js/156.6e7e9823.js"><link rel="prefetch" href="/note-book/assets/js/157.314256c8.js"><link rel="prefetch" href="/note-book/assets/js/158.78975e9c.js"><link rel="prefetch" href="/note-book/assets/js/159.784a728f.js"><link rel="prefetch" href="/note-book/assets/js/16.a44efb76.js"><link rel="prefetch" href="/note-book/assets/js/160.77b75a53.js"><link rel="prefetch" href="/note-book/assets/js/161.f402baac.js"><link rel="prefetch" href="/note-book/assets/js/162.3c1c1d6d.js"><link rel="prefetch" href="/note-book/assets/js/163.fc61eb32.js"><link rel="prefetch" href="/note-book/assets/js/164.72064cce.js"><link rel="prefetch" href="/note-book/assets/js/165.f26c2711.js"><link rel="prefetch" href="/note-book/assets/js/166.dae77ce6.js"><link rel="prefetch" href="/note-book/assets/js/167.c20cd499.js"><link rel="prefetch" href="/note-book/assets/js/168.069317cf.js"><link rel="prefetch" href="/note-book/assets/js/169.e978e870.js"><link rel="prefetch" href="/note-book/assets/js/17.e8ae571a.js"><link rel="prefetch" href="/note-book/assets/js/170.62a732e8.js"><link rel="prefetch" href="/note-book/assets/js/171.45f510e3.js"><link rel="prefetch" href="/note-book/assets/js/172.550dfc27.js"><link rel="prefetch" href="/note-book/assets/js/173.3ae59921.js"><link rel="prefetch" href="/note-book/assets/js/174.8126fcf5.js"><link rel="prefetch" href="/note-book/assets/js/175.d3c4e69b.js"><link rel="prefetch" href="/note-book/assets/js/176.0045bd5b.js"><link rel="prefetch" href="/note-book/assets/js/177.84858315.js"><link rel="prefetch" href="/note-book/assets/js/178.0e0b6161.js"><link rel="prefetch" href="/note-book/assets/js/179.2356deeb.js"><link rel="prefetch" href="/note-book/assets/js/18.15a5951f.js"><link rel="prefetch" href="/note-book/assets/js/180.8dd79de0.js"><link rel="prefetch" href="/note-book/assets/js/181.1413f4ba.js"><link rel="prefetch" href="/note-book/assets/js/182.26357827.js"><link rel="prefetch" href="/note-book/assets/js/183.ead34b26.js"><link rel="prefetch" href="/note-book/assets/js/184.f676b81d.js"><link rel="prefetch" href="/note-book/assets/js/185.a73fc37c.js"><link rel="prefetch" href="/note-book/assets/js/186.8fc0126b.js"><link rel="prefetch" href="/note-book/assets/js/187.87f3291a.js"><link rel="prefetch" href="/note-book/assets/js/188.6cb3b2a2.js"><link rel="prefetch" href="/note-book/assets/js/189.c4d41e3d.js"><link rel="prefetch" href="/note-book/assets/js/19.dc244a2f.js"><link rel="prefetch" href="/note-book/assets/js/190.34b314a3.js"><link rel="prefetch" href="/note-book/assets/js/191.820b8997.js"><link rel="prefetch" href="/note-book/assets/js/192.91a56dd8.js"><link rel="prefetch" href="/note-book/assets/js/193.ad3feadd.js"><link rel="prefetch" href="/note-book/assets/js/194.86131719.js"><link rel="prefetch" href="/note-book/assets/js/195.a7a8cc4d.js"><link rel="prefetch" href="/note-book/assets/js/196.83bf29d8.js"><link rel="prefetch" href="/note-book/assets/js/197.c3ca6225.js"><link rel="prefetch" href="/note-book/assets/js/198.989e069d.js"><link rel="prefetch" href="/note-book/assets/js/199.60e2ed99.js"><link rel="prefetch" href="/note-book/assets/js/2.458f1cc9.js"><link rel="prefetch" href="/note-book/assets/js/20.e6493c9a.js"><link rel="prefetch" href="/note-book/assets/js/200.d6dd058a.js"><link rel="prefetch" href="/note-book/assets/js/201.d1435a67.js"><link rel="prefetch" href="/note-book/assets/js/202.bf97581e.js"><link rel="prefetch" href="/note-book/assets/js/203.c454f3c6.js"><link rel="prefetch" href="/note-book/assets/js/204.b88de65c.js"><link rel="prefetch" href="/note-book/assets/js/205.b1ceb4b1.js"><link rel="prefetch" href="/note-book/assets/js/206.2ab33fd4.js"><link rel="prefetch" href="/note-book/assets/js/207.57499371.js"><link rel="prefetch" href="/note-book/assets/js/208.fe529915.js"><link rel="prefetch" href="/note-book/assets/js/209.455a8602.js"><link rel="prefetch" href="/note-book/assets/js/21.e64daf71.js"><link rel="prefetch" href="/note-book/assets/js/210.0f50bc32.js"><link rel="prefetch" href="/note-book/assets/js/211.58805198.js"><link rel="prefetch" href="/note-book/assets/js/212.43a493ec.js"><link rel="prefetch" href="/note-book/assets/js/213.b4c84f69.js"><link rel="prefetch" href="/note-book/assets/js/214.3cd7fd80.js"><link rel="prefetch" href="/note-book/assets/js/215.672084af.js"><link rel="prefetch" href="/note-book/assets/js/216.d5c38d61.js"><link rel="prefetch" href="/note-book/assets/js/217.f69d4c03.js"><link rel="prefetch" href="/note-book/assets/js/218.2f7bbf4b.js"><link rel="prefetch" href="/note-book/assets/js/219.0b536d8d.js"><link rel="prefetch" href="/note-book/assets/js/22.b04517ae.js"><link rel="prefetch" href="/note-book/assets/js/220.341b69e7.js"><link rel="prefetch" href="/note-book/assets/js/221.bb9b94fc.js"><link rel="prefetch" href="/note-book/assets/js/222.c6913035.js"><link rel="prefetch" href="/note-book/assets/js/223.3cb8b35e.js"><link rel="prefetch" href="/note-book/assets/js/224.c132cb08.js"><link rel="prefetch" href="/note-book/assets/js/225.21adc9ac.js"><link rel="prefetch" href="/note-book/assets/js/226.12563607.js"><link rel="prefetch" href="/note-book/assets/js/227.ae65beb0.js"><link rel="prefetch" href="/note-book/assets/js/228.36ed5440.js"><link rel="prefetch" href="/note-book/assets/js/229.dea571ab.js"><link rel="prefetch" href="/note-book/assets/js/23.02a99e05.js"><link rel="prefetch" href="/note-book/assets/js/230.92799f0c.js"><link rel="prefetch" href="/note-book/assets/js/231.21e32a70.js"><link rel="prefetch" href="/note-book/assets/js/232.9c7e63e7.js"><link rel="prefetch" href="/note-book/assets/js/233.4ca6c41b.js"><link rel="prefetch" href="/note-book/assets/js/234.3454f017.js"><link rel="prefetch" href="/note-book/assets/js/235.46136344.js"><link rel="prefetch" href="/note-book/assets/js/236.c3d4aa3d.js"><link rel="prefetch" href="/note-book/assets/js/237.a51e97be.js"><link rel="prefetch" href="/note-book/assets/js/238.d6eb91f9.js"><link rel="prefetch" href="/note-book/assets/js/239.ef59aab3.js"><link rel="prefetch" href="/note-book/assets/js/24.6cc8609f.js"><link rel="prefetch" href="/note-book/assets/js/240.4f4f4358.js"><link rel="prefetch" href="/note-book/assets/js/241.dee2d51e.js"><link rel="prefetch" href="/note-book/assets/js/242.1bbaf1ce.js"><link rel="prefetch" href="/note-book/assets/js/243.b90f37de.js"><link rel="prefetch" href="/note-book/assets/js/244.953b2072.js"><link rel="prefetch" href="/note-book/assets/js/245.173cee30.js"><link rel="prefetch" href="/note-book/assets/js/246.02130b39.js"><link rel="prefetch" href="/note-book/assets/js/247.788d9178.js"><link rel="prefetch" href="/note-book/assets/js/248.97fbf04e.js"><link rel="prefetch" href="/note-book/assets/js/249.05beb881.js"><link rel="prefetch" href="/note-book/assets/js/25.f132973d.js"><link rel="prefetch" href="/note-book/assets/js/250.412d6046.js"><link rel="prefetch" href="/note-book/assets/js/251.db25bf92.js"><link rel="prefetch" href="/note-book/assets/js/252.418962a5.js"><link rel="prefetch" href="/note-book/assets/js/253.b0c631a9.js"><link rel="prefetch" href="/note-book/assets/js/254.4b851ac5.js"><link rel="prefetch" href="/note-book/assets/js/255.29eb2bf2.js"><link rel="prefetch" href="/note-book/assets/js/256.8cecc89a.js"><link rel="prefetch" href="/note-book/assets/js/257.88f84f94.js"><link rel="prefetch" href="/note-book/assets/js/258.14e7966a.js"><link rel="prefetch" href="/note-book/assets/js/259.eb3e918e.js"><link rel="prefetch" href="/note-book/assets/js/26.18c5be20.js"><link rel="prefetch" href="/note-book/assets/js/260.ea11571d.js"><link rel="prefetch" href="/note-book/assets/js/261.b6a6a794.js"><link rel="prefetch" href="/note-book/assets/js/262.3b604ed6.js"><link rel="prefetch" href="/note-book/assets/js/263.91a56dcb.js"><link rel="prefetch" href="/note-book/assets/js/264.4300f47a.js"><link rel="prefetch" href="/note-book/assets/js/265.3e197963.js"><link rel="prefetch" href="/note-book/assets/js/266.13c07e86.js"><link rel="prefetch" href="/note-book/assets/js/267.a4af600e.js"><link rel="prefetch" href="/note-book/assets/js/268.9e0977fe.js"><link rel="prefetch" href="/note-book/assets/js/269.e71cc3ce.js"><link rel="prefetch" href="/note-book/assets/js/27.d9344bf4.js"><link rel="prefetch" href="/note-book/assets/js/270.ca00bffa.js"><link rel="prefetch" href="/note-book/assets/js/271.aa485ac3.js"><link rel="prefetch" href="/note-book/assets/js/272.12718380.js"><link rel="prefetch" href="/note-book/assets/js/273.d85998c5.js"><link rel="prefetch" href="/note-book/assets/js/274.706ffa64.js"><link rel="prefetch" href="/note-book/assets/js/275.b42e1ed8.js"><link rel="prefetch" href="/note-book/assets/js/276.f92c5bbf.js"><link rel="prefetch" href="/note-book/assets/js/277.7a7fb72a.js"><link rel="prefetch" href="/note-book/assets/js/278.744ab283.js"><link rel="prefetch" href="/note-book/assets/js/279.254199a3.js"><link rel="prefetch" href="/note-book/assets/js/28.cd8cd4b4.js"><link rel="prefetch" href="/note-book/assets/js/280.4985c31e.js"><link rel="prefetch" href="/note-book/assets/js/281.41f8dc86.js"><link rel="prefetch" href="/note-book/assets/js/282.c9dd44ce.js"><link rel="prefetch" href="/note-book/assets/js/283.00cd43f9.js"><link rel="prefetch" href="/note-book/assets/js/284.d1137416.js"><link rel="prefetch" href="/note-book/assets/js/285.6d60f28c.js"><link rel="prefetch" href="/note-book/assets/js/286.37d11359.js"><link rel="prefetch" href="/note-book/assets/js/287.e0c07cb4.js"><link rel="prefetch" href="/note-book/assets/js/288.3e09b647.js"><link rel="prefetch" href="/note-book/assets/js/289.d5d72404.js"><link rel="prefetch" href="/note-book/assets/js/29.3ca5696f.js"><link rel="prefetch" href="/note-book/assets/js/290.52438899.js"><link rel="prefetch" href="/note-book/assets/js/291.69c12d68.js"><link rel="prefetch" href="/note-book/assets/js/292.eb9e5f08.js"><link rel="prefetch" href="/note-book/assets/js/293.f9b7d54e.js"><link rel="prefetch" href="/note-book/assets/js/294.81b84d8d.js"><link rel="prefetch" href="/note-book/assets/js/295.541014ca.js"><link rel="prefetch" href="/note-book/assets/js/296.0270a456.js"><link rel="prefetch" href="/note-book/assets/js/297.bf209a1f.js"><link rel="prefetch" href="/note-book/assets/js/298.3bc5ba0d.js"><link rel="prefetch" href="/note-book/assets/js/299.81f09bfb.js"><link rel="prefetch" href="/note-book/assets/js/3.c49b1b27.js"><link rel="prefetch" href="/note-book/assets/js/30.e7a40bb2.js"><link rel="prefetch" href="/note-book/assets/js/300.f1cea7d9.js"><link rel="prefetch" href="/note-book/assets/js/301.567a8a46.js"><link rel="prefetch" href="/note-book/assets/js/302.475162fb.js"><link rel="prefetch" href="/note-book/assets/js/303.ceb1bff8.js"><link rel="prefetch" href="/note-book/assets/js/304.c0b1d9c4.js"><link rel="prefetch" href="/note-book/assets/js/305.e76d26e8.js"><link rel="prefetch" href="/note-book/assets/js/306.30e490f2.js"><link rel="prefetch" href="/note-book/assets/js/307.1c11bf35.js"><link rel="prefetch" href="/note-book/assets/js/308.275a7560.js"><link rel="prefetch" href="/note-book/assets/js/309.214ef326.js"><link rel="prefetch" href="/note-book/assets/js/31.9e3f07cf.js"><link rel="prefetch" href="/note-book/assets/js/310.ff278b12.js"><link rel="prefetch" href="/note-book/assets/js/311.6d84c9be.js"><link rel="prefetch" href="/note-book/assets/js/312.5383c13a.js"><link rel="prefetch" href="/note-book/assets/js/313.d6548037.js"><link rel="prefetch" href="/note-book/assets/js/314.d322c4c4.js"><link rel="prefetch" href="/note-book/assets/js/315.e9212036.js"><link rel="prefetch" href="/note-book/assets/js/316.7d623eed.js"><link rel="prefetch" href="/note-book/assets/js/317.13739a72.js"><link rel="prefetch" href="/note-book/assets/js/318.62cc4de7.js"><link rel="prefetch" href="/note-book/assets/js/319.c37f8815.js"><link rel="prefetch" href="/note-book/assets/js/32.6e9ce623.js"><link rel="prefetch" href="/note-book/assets/js/320.becb56b7.js"><link rel="prefetch" href="/note-book/assets/js/321.15d11e26.js"><link rel="prefetch" href="/note-book/assets/js/322.2b8177dc.js"><link rel="prefetch" href="/note-book/assets/js/323.150984c9.js"><link rel="prefetch" href="/note-book/assets/js/324.d1e419c5.js"><link rel="prefetch" href="/note-book/assets/js/325.236ce6b8.js"><link rel="prefetch" href="/note-book/assets/js/326.c31ffda5.js"><link rel="prefetch" href="/note-book/assets/js/327.735d2ee7.js"><link rel="prefetch" href="/note-book/assets/js/328.987e9660.js"><link rel="prefetch" href="/note-book/assets/js/329.4be0ab37.js"><link rel="prefetch" href="/note-book/assets/js/33.a300dc0b.js"><link rel="prefetch" href="/note-book/assets/js/330.17de54b9.js"><link rel="prefetch" href="/note-book/assets/js/331.c11547b4.js"><link rel="prefetch" href="/note-book/assets/js/332.1a9598eb.js"><link rel="prefetch" href="/note-book/assets/js/333.dab97249.js"><link rel="prefetch" href="/note-book/assets/js/334.cec8710c.js"><link rel="prefetch" href="/note-book/assets/js/335.55859bb3.js"><link rel="prefetch" href="/note-book/assets/js/336.3ae78882.js"><link rel="prefetch" href="/note-book/assets/js/337.09208c3b.js"><link rel="prefetch" href="/note-book/assets/js/338.b2e4e944.js"><link rel="prefetch" href="/note-book/assets/js/339.2bbc7e5a.js"><link rel="prefetch" href="/note-book/assets/js/34.b431c10f.js"><link rel="prefetch" href="/note-book/assets/js/340.2e2f8c4f.js"><link rel="prefetch" href="/note-book/assets/js/341.e6a4ea1c.js"><link rel="prefetch" href="/note-book/assets/js/342.6064eaa0.js"><link rel="prefetch" href="/note-book/assets/js/343.99b1ea5d.js"><link rel="prefetch" href="/note-book/assets/js/344.f4b06197.js"><link rel="prefetch" href="/note-book/assets/js/345.7ca715d8.js"><link rel="prefetch" href="/note-book/assets/js/346.287ac736.js"><link rel="prefetch" href="/note-book/assets/js/347.2bbf1d24.js"><link rel="prefetch" href="/note-book/assets/js/348.4c2b49cd.js"><link rel="prefetch" href="/note-book/assets/js/349.68516e23.js"><link rel="prefetch" href="/note-book/assets/js/35.eefdad2e.js"><link rel="prefetch" href="/note-book/assets/js/350.63bd841a.js"><link rel="prefetch" href="/note-book/assets/js/351.b2342c30.js"><link rel="prefetch" href="/note-book/assets/js/352.be272988.js"><link rel="prefetch" href="/note-book/assets/js/353.aca91961.js"><link rel="prefetch" href="/note-book/assets/js/354.9a4e135f.js"><link rel="prefetch" href="/note-book/assets/js/355.612026ba.js"><link rel="prefetch" href="/note-book/assets/js/356.0e976f30.js"><link rel="prefetch" href="/note-book/assets/js/357.2bed7d74.js"><link rel="prefetch" href="/note-book/assets/js/358.a9f6c05a.js"><link rel="prefetch" href="/note-book/assets/js/359.b643cb3f.js"><link rel="prefetch" href="/note-book/assets/js/36.cf9a6b03.js"><link rel="prefetch" href="/note-book/assets/js/360.5a4529b6.js"><link rel="prefetch" href="/note-book/assets/js/361.501eee01.js"><link rel="prefetch" href="/note-book/assets/js/362.5a91bb8b.js"><link rel="prefetch" href="/note-book/assets/js/363.d7838ac7.js"><link rel="prefetch" href="/note-book/assets/js/364.8dc1c080.js"><link rel="prefetch" href="/note-book/assets/js/365.246abe20.js"><link rel="prefetch" href="/note-book/assets/js/366.ef26a9f5.js"><link rel="prefetch" href="/note-book/assets/js/367.397cf4d6.js"><link rel="prefetch" href="/note-book/assets/js/368.5dc3fdcc.js"><link rel="prefetch" href="/note-book/assets/js/369.2d30dd63.js"><link rel="prefetch" href="/note-book/assets/js/37.21a59fd3.js"><link rel="prefetch" href="/note-book/assets/js/370.b0bb3ba4.js"><link rel="prefetch" href="/note-book/assets/js/371.5132fed4.js"><link rel="prefetch" href="/note-book/assets/js/372.a1445168.js"><link rel="prefetch" href="/note-book/assets/js/373.c3b67c28.js"><link rel="prefetch" href="/note-book/assets/js/374.a5a8732d.js"><link rel="prefetch" href="/note-book/assets/js/375.626c14d3.js"><link rel="prefetch" href="/note-book/assets/js/376.8ba58a84.js"><link rel="prefetch" href="/note-book/assets/js/377.124c1fa9.js"><link rel="prefetch" href="/note-book/assets/js/378.32f4ba56.js"><link rel="prefetch" href="/note-book/assets/js/379.0c7b32fc.js"><link rel="prefetch" href="/note-book/assets/js/38.768e1ccf.js"><link rel="prefetch" href="/note-book/assets/js/380.502de1f5.js"><link rel="prefetch" href="/note-book/assets/js/381.b9ee490e.js"><link rel="prefetch" href="/note-book/assets/js/382.4aace635.js"><link rel="prefetch" href="/note-book/assets/js/383.65a451f4.js"><link rel="prefetch" href="/note-book/assets/js/384.60d169db.js"><link rel="prefetch" href="/note-book/assets/js/385.012a827b.js"><link rel="prefetch" href="/note-book/assets/js/386.0f9b89a9.js"><link rel="prefetch" href="/note-book/assets/js/387.5158b242.js"><link rel="prefetch" href="/note-book/assets/js/388.b69209d6.js"><link rel="prefetch" href="/note-book/assets/js/389.560d10a4.js"><link rel="prefetch" href="/note-book/assets/js/39.ae3b7bd1.js"><link rel="prefetch" href="/note-book/assets/js/390.432a7d8d.js"><link rel="prefetch" href="/note-book/assets/js/391.67b5b678.js"><link rel="prefetch" href="/note-book/assets/js/392.ac98ba78.js"><link rel="prefetch" href="/note-book/assets/js/393.dd8f36f1.js"><link rel="prefetch" href="/note-book/assets/js/394.98abf6f5.js"><link rel="prefetch" href="/note-book/assets/js/395.a54ee7e6.js"><link rel="prefetch" href="/note-book/assets/js/396.c1fee099.js"><link rel="prefetch" href="/note-book/assets/js/397.25c5d631.js"><link rel="prefetch" href="/note-book/assets/js/398.c55fb00d.js"><link rel="prefetch" href="/note-book/assets/js/399.c2d473ea.js"><link rel="prefetch" href="/note-book/assets/js/4.a0f967d1.js"><link rel="prefetch" href="/note-book/assets/js/40.9e3e74e4.js"><link rel="prefetch" href="/note-book/assets/js/400.c36f8d1f.js"><link rel="prefetch" href="/note-book/assets/js/401.58a954a3.js"><link rel="prefetch" href="/note-book/assets/js/402.ef119c7d.js"><link rel="prefetch" href="/note-book/assets/js/403.bd154c5d.js"><link rel="prefetch" href="/note-book/assets/js/404.4f3294ca.js"><link rel="prefetch" href="/note-book/assets/js/405.3f1b5d82.js"><link rel="prefetch" href="/note-book/assets/js/406.32fdc845.js"><link rel="prefetch" href="/note-book/assets/js/407.cb91a208.js"><link rel="prefetch" href="/note-book/assets/js/408.c2c0bf4b.js"><link rel="prefetch" href="/note-book/assets/js/409.d9b3e515.js"><link rel="prefetch" href="/note-book/assets/js/41.0cbbe778.js"><link rel="prefetch" href="/note-book/assets/js/410.7b90c790.js"><link rel="prefetch" href="/note-book/assets/js/412.167cfb5b.js"><link rel="prefetch" href="/note-book/assets/js/413.d1c09876.js"><link rel="prefetch" href="/note-book/assets/js/414.c2521651.js"><link rel="prefetch" href="/note-book/assets/js/415.dd822c5f.js"><link rel="prefetch" href="/note-book/assets/js/416.5acccaad.js"><link rel="prefetch" href="/note-book/assets/js/417.b98b7eb2.js"><link rel="prefetch" href="/note-book/assets/js/418.1da0df75.js"><link rel="prefetch" href="/note-book/assets/js/419.6f18401b.js"><link rel="prefetch" href="/note-book/assets/js/42.2cc00617.js"><link rel="prefetch" href="/note-book/assets/js/420.e35ba2e0.js"><link rel="prefetch" href="/note-book/assets/js/421.ead2e2a1.js"><link rel="prefetch" href="/note-book/assets/js/422.d2868fed.js"><link rel="prefetch" href="/note-book/assets/js/423.981d89be.js"><link rel="prefetch" href="/note-book/assets/js/424.39acd2ff.js"><link rel="prefetch" href="/note-book/assets/js/425.a5a38455.js"><link rel="prefetch" href="/note-book/assets/js/426.cdfd2b37.js"><link rel="prefetch" href="/note-book/assets/js/427.bc414301.js"><link rel="prefetch" href="/note-book/assets/js/428.5e92db32.js"><link rel="prefetch" href="/note-book/assets/js/429.3cad87c6.js"><link rel="prefetch" href="/note-book/assets/js/43.6f07d334.js"><link rel="prefetch" href="/note-book/assets/js/430.f8ffd4e3.js"><link rel="prefetch" href="/note-book/assets/js/431.8b668415.js"><link rel="prefetch" href="/note-book/assets/js/432.a95c158a.js"><link rel="prefetch" href="/note-book/assets/js/433.b1e1ca48.js"><link rel="prefetch" href="/note-book/assets/js/434.3323eb6a.js"><link rel="prefetch" href="/note-book/assets/js/435.27d7416d.js"><link rel="prefetch" href="/note-book/assets/js/436.0bf89095.js"><link rel="prefetch" href="/note-book/assets/js/437.ba72e443.js"><link rel="prefetch" href="/note-book/assets/js/438.22c43efa.js"><link rel="prefetch" href="/note-book/assets/js/439.c8310505.js"><link rel="prefetch" href="/note-book/assets/js/44.a9242940.js"><link rel="prefetch" href="/note-book/assets/js/440.051e2fd5.js"><link rel="prefetch" href="/note-book/assets/js/441.21c2b848.js"><link rel="prefetch" href="/note-book/assets/js/442.859dc069.js"><link rel="prefetch" href="/note-book/assets/js/443.71cfd5e1.js"><link rel="prefetch" href="/note-book/assets/js/444.d75d8202.js"><link rel="prefetch" href="/note-book/assets/js/445.103b4592.js"><link rel="prefetch" href="/note-book/assets/js/446.a03269e0.js"><link rel="prefetch" href="/note-book/assets/js/447.bf9886e0.js"><link rel="prefetch" href="/note-book/assets/js/448.ae7d4ad6.js"><link rel="prefetch" href="/note-book/assets/js/45.dd4a3126.js"><link rel="prefetch" href="/note-book/assets/js/46.4d074b09.js"><link rel="prefetch" href="/note-book/assets/js/47.eb875188.js"><link rel="prefetch" href="/note-book/assets/js/49.7bffca5a.js"><link rel="prefetch" href="/note-book/assets/js/5.3f04277e.js"><link rel="prefetch" href="/note-book/assets/js/50.9f73f95d.js"><link rel="prefetch" href="/note-book/assets/js/51.8c6093a2.js"><link rel="prefetch" href="/note-book/assets/js/52.315e4049.js"><link rel="prefetch" href="/note-book/assets/js/53.51ef407d.js"><link rel="prefetch" href="/note-book/assets/js/54.21410c35.js"><link rel="prefetch" href="/note-book/assets/js/55.b72af851.js"><link rel="prefetch" href="/note-book/assets/js/56.51a39fdd.js"><link rel="prefetch" href="/note-book/assets/js/57.a6262444.js"><link rel="prefetch" href="/note-book/assets/js/58.313d6933.js"><link rel="prefetch" href="/note-book/assets/js/59.d539efb8.js"><link rel="prefetch" href="/note-book/assets/js/60.37ec8b6c.js"><link rel="prefetch" href="/note-book/assets/js/61.ca422b9a.js"><link rel="prefetch" href="/note-book/assets/js/62.6701522e.js"><link rel="prefetch" href="/note-book/assets/js/63.da61d600.js"><link rel="prefetch" href="/note-book/assets/js/64.20fcf92e.js"><link rel="prefetch" href="/note-book/assets/js/65.5543b07c.js"><link rel="prefetch" href="/note-book/assets/js/66.0621951c.js"><link rel="prefetch" href="/note-book/assets/js/67.7e8422a9.js"><link rel="prefetch" href="/note-book/assets/js/68.9b0574ea.js"><link rel="prefetch" href="/note-book/assets/js/69.4ccc6be3.js"><link rel="prefetch" href="/note-book/assets/js/7.2be06843.js"><link rel="prefetch" href="/note-book/assets/js/70.c873f999.js"><link rel="prefetch" href="/note-book/assets/js/71.c97ae4c5.js"><link rel="prefetch" href="/note-book/assets/js/72.d4088216.js"><link rel="prefetch" href="/note-book/assets/js/73.1a27808c.js"><link rel="prefetch" href="/note-book/assets/js/74.5f08a860.js"><link rel="prefetch" href="/note-book/assets/js/75.e344c4ae.js"><link rel="prefetch" href="/note-book/assets/js/76.5450fdaa.js"><link rel="prefetch" href="/note-book/assets/js/77.b9a24e15.js"><link rel="prefetch" href="/note-book/assets/js/78.46eb9348.js"><link rel="prefetch" href="/note-book/assets/js/79.df7370a7.js"><link rel="prefetch" href="/note-book/assets/js/8.82d0136b.js"><link rel="prefetch" href="/note-book/assets/js/80.78494bf4.js"><link rel="prefetch" href="/note-book/assets/js/81.7b2bc8ae.js"><link rel="prefetch" href="/note-book/assets/js/82.72877943.js"><link rel="prefetch" href="/note-book/assets/js/83.45f0c9a2.js"><link rel="prefetch" href="/note-book/assets/js/84.df6fca4a.js"><link rel="prefetch" href="/note-book/assets/js/85.bdb3f510.js"><link rel="prefetch" href="/note-book/assets/js/86.d49b7934.js"><link rel="prefetch" href="/note-book/assets/js/87.475de2af.js"><link rel="prefetch" href="/note-book/assets/js/88.348f83b9.js"><link rel="prefetch" href="/note-book/assets/js/89.b8e9a536.js"><link rel="prefetch" href="/note-book/assets/js/9.154d0c8c.js"><link rel="prefetch" href="/note-book/assets/js/90.a54019f0.js"><link rel="prefetch" href="/note-book/assets/js/91.f0ebbc64.js"><link rel="prefetch" href="/note-book/assets/js/92.0187b430.js"><link rel="prefetch" href="/note-book/assets/js/93.40c0edcf.js"><link rel="prefetch" href="/note-book/assets/js/94.f0cb6726.js"><link rel="prefetch" href="/note-book/assets/js/95.d2c7b946.js"><link rel="prefetch" href="/note-book/assets/js/96.15eb9a00.js"><link rel="prefetch" href="/note-book/assets/js/97.f265ec0f.js"><link rel="prefetch" href="/note-book/assets/js/98.7f1ed467.js"><link rel="prefetch" href="/note-book/assets/js/99.e8f0d7cb.js">
    <link rel="stylesheet" href="/note-book/assets/css/0.styles.ffaec31e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-book/" class="home-link router-link-active"><!----> <span class="site-name">Mrcode 笔记本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-book/_posts/" class="nav-link">
  博客（零散文章）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">
  研磨设计模式（李兴华）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elasticsearch" class="dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">
  核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link router-link-active">
  高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合性导航
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/" class="nav-link">
  全目录导航
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/001-introduce.html" class="nav-link">
  第一版（001 ~ 123 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/124.html" class="nav-link">
  第二版（124 ~ 195 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/121.html" class="nav-link">
  课程总结（难题与解决方案）
</a></li></ul></li><li class="dropdown-item"><h4>
          精彩知识精选
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/redis/007.html" class="nav-link">
  Redis 篇（redis 企业级集群架构）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/035.html" class="nav-link">
  多级缓存架构设计
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/040.html" class="nav-link">
  数据库 + 缓存双写一致性解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/045.html" class="nav-link">
  缓存维度化拆分解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/051.html" class="nav-link">
  缓存命中率提升解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/057.html" class="nav-link">
  缓存并发重建冲突解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/069.html" class="nav-link">
  缓存预热解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/077.html" class="nav-link">
  热点缓存自动降级方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/110.html" class="nav-link">
  缓存雪崩解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/117.html" class="nav-link">
  缓存穿透解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/119.html" class="nav-link">
  缓存失效解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/084.html" class="nav-link">
  高可用分布式系统架构设计（hystrix 篇）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/047.html" class="nav-link">
  spring boot 整合 ehcache
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/storm/062.html" class="nav-link">
  史上最通俗易懂 Storm 教程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">
  本笔记介绍
</a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/linux-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux 基础篇
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/note-book/spring-cloud-tutorial/" class="nav-link">
  Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/note-book/css-zxx/" class="nav-link">
  CSS 深入理解（张鑫旭）
</a></li><li class="dropdown-item"><h4>
          Mycat
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/mycat/" class="nav-link">
  Mycat 1
</a></li><li class="dropdown-subitem"><a href="/note-book/mycat2/" class="nav-link">
  Mycat 2
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-book/_posts/" class="nav-link">
  博客（零散文章）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">
  研磨设计模式（李兴华）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elasticsearch" class="dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">
  核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link router-link-active">
  高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合性导航
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/" class="nav-link">
  全目录导航
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/001-introduce.html" class="nav-link">
  第一版（001 ~ 123 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/124.html" class="nav-link">
  第二版（124 ~ 195 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/121.html" class="nav-link">
  课程总结（难题与解决方案）
</a></li></ul></li><li class="dropdown-item"><h4>
          精彩知识精选
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/redis/007.html" class="nav-link">
  Redis 篇（redis 企业级集群架构）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/035.html" class="nav-link">
  多级缓存架构设计
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/040.html" class="nav-link">
  数据库 + 缓存双写一致性解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/045.html" class="nav-link">
  缓存维度化拆分解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/051.html" class="nav-link">
  缓存命中率提升解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/057.html" class="nav-link">
  缓存并发重建冲突解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/069.html" class="nav-link">
  缓存预热解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/077.html" class="nav-link">
  热点缓存自动降级方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/110.html" class="nav-link">
  缓存雪崩解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/117.html" class="nav-link">
  缓存穿透解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/119.html" class="nav-link">
  缓存失效解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/084.html" class="nav-link">
  高可用分布式系统架构设计（hystrix 篇）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/047.html" class="nav-link">
  spring boot 整合 ehcache
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/storm/062.html" class="nav-link">
  史上最通俗易懂 Storm 教程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">
  本笔记介绍
</a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/linux-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux 基础篇
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/note-book/spring-cloud-tutorial/" class="nav-link">
  Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/note-book/css-zxx/" class="nav-link">
  CSS 深入理解（张鑫旭）
</a></li><li class="dropdown-item"><h4>
          Mycat
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/mycat/" class="nav-link">
  Mycat 1
</a></li><li class="dropdown-subitem"><a href="/note-book/mycat2/" class="nav-link">
  Mycat 2
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/note-book/elasticsearch-senior/" class="sidebar-link">elasticsearch 高级篇</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>结构化搜索</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度探秘搜索技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>彻底掌握 IK 分词器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深入聚合数据分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据建模实战</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-book/elasticsearch-senior/modeling/59-compare.html" class="sidebar-link">关系型与 document 类型数据模型对比</a></li><li><a href="/note-book/elasticsearch-senior/modeling/60-join.html" class="sidebar-link">通过应用层 join 实现用户与博客的关联</a></li><li><a href="/note-book/elasticsearch-senior/modeling/61-redundancy.html" class="sidebar-link">通过数据冗余实现用户与博客的关联</a></li><li><a href="/note-book/elasticsearch-senior/modeling/62-group.html" class="sidebar-link">对每个用户发表的博客进行分组</a></li><li><a href="/note-book/elasticsearch-senior/modeling/63-file.html" class="sidebar-link">对文件系统进行数据建模以及文件搜索实战</a></li><li><a href="/note-book/elasticsearch-senior/modeling/64-lock.html" class="active sidebar-link">基于全局锁实现悲观锁并发控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-book/elasticsearch-senior/modeling/64-lock.html#悲观锁介绍" class="sidebar-link">悲观锁介绍</a></li><li class="sidebar-sub-header"><a href="/note-book/elasticsearch-senior/modeling/64-lock.html#全局锁" class="sidebar-link">全局锁</a></li><li class="sidebar-sub-header"><a href="/note-book/elasticsearch-senior/modeling/64-lock.html#全局锁的优点和缺点" class="sidebar-link">全局锁的优点和缺点</a></li></ul></li><li><a href="/note-book/elasticsearch-senior/modeling/65-plock.html" class="sidebar-link">基于 document 锁实现悲观锁并发控制</a></li><li><a href="/note-book/elasticsearch-senior/modeling/66-plock.html" class="sidebar-link">基于共享锁和排他锁实现悲观锁并发控制</a></li><li><a href="/note-book/elasticsearch-senior/modeling/67-nested-object.html" class="sidebar-link">基于 nested object 实现博客与评论嵌套关系</a></li><li><a href="/note-book/elasticsearch-senior/modeling/68-aggs.html" class="sidebar-link">nested object 聚合分析</a></li><li><a href="/note-book/elasticsearch-senior/modeling/69-father-son.html" class="sidebar-link">研发中心管理案例以及父子关系数据建模</a></li><li><a href="/note-book/elasticsearch-senior/modeling/70-father-son-search.html" class="sidebar-link">根据员工信息和研发中心互相搜索父子数据</a></li><li><a href="/note-book/elasticsearch-senior/modeling/71-aggs.html" class="sidebar-link">对每个国家的员工兴趣爱好进行聚合统计</a></li><li><a href="/note-book/elasticsearch-senior/modeling/72-deep.html" class="sidebar-link">祖孙三层数据关系建模以及搜索实战</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES 高手进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>熟练掌握 ES Java API</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/note-book/elasticsearch-senior/92-.html" class="sidebar-link">快速入门篇以及高手进阶篇课程总结，以及后续阶段课程介绍</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="基于全局锁实现悲观锁并发控制"><a href="#基于全局锁实现悲观锁并发控制" class="header-anchor">#</a> 基于全局锁实现悲观锁并发控制</h1> <h2 id="悲观锁介绍"><a href="#悲观锁介绍" class="header-anchor">#</a> 悲观锁介绍</h2> <p>之前讲解了基于 version 的乐观锁并发控制</p> <p>在数据建模章节，结合文件系统建模的这个案例，把悲观锁的并发控制，3 种锁粒度都给大家仔细讲解一下</p> <p>本章讲解：最粗的一个粒度，全局锁</p> <p>考虑一个场景：多个线程，并发地给 /workspace/projects/helloworld 下的 README.txt 修改文件名</p> <ul><li>乐观锁：
<ol><li>get current version</li> <li>带着这个 current version 去执行修改，如果一旦发现数据已经被别人给修改了，
version 号跟之前自己获取的已经不一样了; 那么必须重新获取新的 version 号再次尝试修改</li></ol></li> <li>悲观锁
<ol><li>上来就先加锁</li> <li>此时就只有你一个能对这数据进行修改</li></ol></li></ul> <h2 id="全局锁"><a href="#全局锁" class="header-anchor">#</a> 全局锁</h2> <p>第一种锁，全局锁：直接锁掉整个 fs index</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在应用中，利用 <code>_create</code> 语法，创建空的 doc ，让 es 保证只能有一个被创建成功的思路</p></div> <div class="language-json line-numbers-mode"><pre class="language-json"><code>PUT /fs/lock/global/_create
<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>fs: 你要上锁的那个 index</li> <li>lock: 就是你指定的一个对这个 index 上全局锁的一个 type</li> <li>global: 就是你上的全局锁对应的这个 doc 的 id</li> <li><code>_create</code>：强制必须是创建，如果 /fs/lock/global 这个 doc 已经存在，那么创建失败，报错</li></ul> <p>利用了 doc 来进行上锁 <code>/fs/lock/global /index/type/id --&gt; doc</code></p> <p>重复执行该创建语法就会报错，那么没有抢占到锁的线程需要重复此操作</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;root_cause&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;version_conflict_engine_exception&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[lock][global]: version conflict, document already exists (current version [1])&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IYbj0OLGQHmMUpLfbhD4Hw&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;shard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fs&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;version_conflict_engine_exception&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[lock][global]: version conflict, document already exists (current version [1])&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index_uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IYbj0OLGQHmMUpLfbhD4Hw&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fs&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">409</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>抢占到该锁的线程，就可以执行各种操作了，比如完成上面的需求，修改文件名称</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>POST /fs/file/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
  <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;README-update.txt&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>操作完成后，释放当前的锁，也就是删除那个空的 doc</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>DELETE /fs/lock/global
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个时候，另外一个线程就会创建成功，然后执行它自己的逻辑</p> <h2 id="全局锁的优点和缺点"><a href="#全局锁的优点和缺点" class="header-anchor">#</a> 全局锁的优点和缺点</h2> <ul><li>优点：操作非常简单，非常容易使用，成本低</li> <li>缺点：你直接就把整个 index 给上锁了，这个时候对 index 中所有的 doc 的操作，都会被 block 住，导致整个系统的并发能力很低</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>这里只是利用了另外一个 type 来创建空的 doc，这样应该是一条 doc 吧？
怎么说是整个 index 呢？难道意思是说所有的使用都是用这一个 doc？ <code>/fs/lock/global</code></p> <p>如果所有的都用这一个 doc 的话，那么的确的全局的</p></div> <p>什么时候使用？
上锁解锁的操作不是频繁，每次上锁之后，执行的操作的耗时不会太长</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/note-book/edit/master/docs/elasticsearch-senior/modeling/64-lock.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: :</span> <span class="time">a year ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-book/elasticsearch-senior/modeling/63-file.html" class="prev">
        对文件系统进行数据建模以及文件搜索实战
      </a></span> <span class="next"><a href="/note-book/elasticsearch-senior/modeling/65-plock.html">
        基于 document 锁实现悲观锁并发控制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/note-book/assets/js/app.03b08693.js" defer></script><script src="/note-book/assets/js/6.203d1198.js" defer></script><script src="/note-book/assets/js/411.a367bedd.js" defer></script><script src="/note-book/assets/js/48.8dd2abf7.js" defer></script>
  </body>
</html>
